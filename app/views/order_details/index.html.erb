<% @orderdetails.each do |orderdetail|%>
<div>
  <% product = Product.find_by(id: orderdetail.product_id) %>
  <div class="row" style="background-color: white;">
    <div class="col-lg-2 d-flex align-items-center">
      <% if product.avatars[0].nil? %>
          <p>Image not available</p>
      <% else %>
          <%= image_tag product.avatars[0].url, size: '80x100' %>
      <% end %>
    </div>
    <div class="col-lg-6" id="pro-des">
      <h3><%= product.name %></h3><br>
      <h6 style="color:orangered;">Price: $<%= product.price %>.00 only</h6><br>
      <h6>Quantity: <span class="cart_qty" data-id = "<%=product.id%>" > <%= orderdetail.quantity %></span></h6>
      <% @total_quantity +=  orderdetail.quantity %>
      <p><% @total_bill += product.price * orderdetail.quantity %></p>
      <%= form_for :orderdetail, url: order_detail_path(product.id), method: :patch, id: "update-cart", remote: true do |c| %>
        <div class="field">
          <%= c.number_field :addquantity, :value => orderdetail.quantity.to_i %>
        </div>
        <div class="field">
          <%= c.hidden_field :prod_price, value: product.price %>
        </div>
        <div class="field">
          <%= c.hidden_field :ttl_bill, value: @total_bill %>
        </div>
        <div class="actions">
          <%= c.submit "Update Quantity" %>
        </div>
      <% end %>
      <h6>Total Bill: <span class="total_bill" data-id = "<%=product.id%>"><%= product.price * orderdetail.quantity %></span></h6>
    </div>
    <div class="col-lg-4 d-flex align-items-center">
      <%= link_to 'Delete', order_details_path(product), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-outline-danger" %>
    </div>
  </div><br>
  <% end -%>
</div>
<% end %>